import t from"./isKey.js";export default function(n){return void 0===n&&(n="  "),function(e,i){var s=e.value,r=e.selectionStart,l=e.selectionEnd;if("keydown"===i.type){if(t("shift+tab",i)){i.preventDefault();var u=s.substring(0,r).split("\n"),a=u.length-1,o=s.substring(0,l).split("\n").length-1,g=s.split("\n").map((function(t,e){return e>=a&&e<=o&&t.startsWith(n)?t.substring(n.length):t})).join("\n");return s!==g?{value:g,selectionStart:u[a].startsWith(n)?r-n.length:r,selectionEnd:l-(s.length-g.length)}:void 0}if(t("tab",i)){if(i.preventDefault(),r===l){var h=r+n.length;return{value:s.substring(0,r)+n+s.substring(l),selectionStart:h,selectionEnd:h}}var f=s.substring(0,r).split("\n").length-1,p=s.substring(0,l).split("\n").length-1;return{value:s.split("\n").map((function(t,e){return e>=f&&e<=p?n+t:t})).join("\n"),selectionStart:r+n.length,selectionEnd:l+n.length*(p-f+1)}}}}}
