import t from"./isKey.js";export default function(){var n=[],e=null,u=function(t){e=0,n.push(t)},l=function(t){(n=n.slice(0,e+1)).push(t),e=n.length-1},r=function(t){return n[e].value!==t.value||n[e].selectionStart!==t.selectionStart||n[e].selectionEnd!==t.selectionEnd};return function(i,f){if("keydown"===f.type){if(t("ctrl/cmd+z",f)&&(f.preventDefault(),null!==e)){r(i)&&(n.push(i),e++);var o=Math.max(0,e-1);return e=o,n[o]}if(t("ctrl/cmd+shift+z",f)&&(f.preventDefault(),null!==e)){var c=Math.min(n.length-1,e+1);return e=c,n[c]}if(null===e)return void u(i);if(r(i))return void l(i)}"input"===f.type&&(null===e?u(i):l(i))}}
